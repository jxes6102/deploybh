"use strict";(self["webpackChunkweb_front"]=self["webpackChunkweb_front"]||[]).push([[952],{69952:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login_form"},[e("div",{staticClass:"login_right"},[e("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[e("div",{staticClass:"login_title"},[t._v(t._s(t.$t("uc.login.login")))]),e("FormItem",{attrs:{prop:"user"}},[e("Input",{staticClass:"user",attrs:{name:"user",type:"text",placeholder:t.$t("uc.login.usertip")},model:{value:t.formInline.user,callback:function(e){t.$set(t.formInline,"user",e)},expression:"formInline.user"}})],1),e("FormItem",{staticClass:"password",attrs:{prop:"password"}},[e("Input",{attrs:{type:"password",placeholder:t.$t("uc.login.pwdtip")},on:{"on-keyup":t.onKeyup},model:{value:t.formInline.password,callback:function(e){t.$set(t.formInline,"password",e)},expression:"formInline.password"}})],1),e("p",{staticClass:"hide",attrs:{id:"notice"}},[t._v(t._s(t.$t("uc.login.validatemsg")))]),e("p",{staticStyle:{height:"30px"}}),e("FormItem",{staticStyle:{"margin-bottom":"15px"}},[e("Button",{staticClass:"login_btn",on:{click:function(e){return t.login()}}},[t._v(t._s(t.$t("uc.login.login")))])],1),e("div",{staticClass:"to_register"},[e("span",[t._v(t._s(t.$t("uc.login.noaccount")))]),e("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("uc.login.goregister")))])],1)],1)],1)])},i=[],r=(n(57658),n(39563),n(77387)),s=n.n(r),a=n(37828),l={data(){return{country:"+86",captchaObj:null,_captchaResult:null,formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:this.$t("uc.login.loginvalidate"),trigger:"blur"}],password:[{required:!0,message:this.$t("uc.login.pwdvalidate1"),trigger:"blur"},{type:"string",message:this.$t("uc.login.pwdvalidate2"),trigger:"blur"}]}}},created:function(){this.init()},computed:{isLogin:function(){return this.$store.getters.isLogin}},methods:{init(){this.$store.commit("navigate","nav-other"),this.$store.state.HeaderActiveName="0",this.isLogin&&this.$router.push("/uc/safe")},onKeyup(t){13==t.keyCode&&s()(".login_btn").click()},initGtCaptcha(){this.$http.get(this.host+this.api.uc.captcha).then((function(t){window.initGeetest({gt:t.body.gt,challenge:t.body.challenge,offline:!t.body.success,new_captcha:t.body.new_captcha,product:"bind",width:"100%"},this.handler)}))},handler(t){t.onReady((()=>{s()("#wait").hide()})).onSuccess((()=>{let e=this._captchaResult=t.getValidate();e?this.handleSubmit("formInline"):this.$Message.error("请完成验证")})),s()(".login_btn").click((()=>{let t=this.formInline.user.length>=4,e=this.formInline.password.length>=6;(!t||!e)&&this.$Message.error(this.$t("common.fillComplete")),this.handleSubmit("formInline")}))},logout(){this.$http.post(this.host+"/uc/logout",{}).then((t=>{var e=t.body;0==e.code&&(localStorage.setItem("MEMBER",JSON.stringify(null)),localStorage.setItem("TOKEN",null),localStorage.removeItem("USERKEY",null))}))},login(){let t=this.formInline.user.length>=4,e=this.formInline.password.length>=6;t&&e?(0,a.x4)({email:this.formInline.user,password:this.formInline.password}).then((t=>{"成功登入"==t.message?(this.$Message.success(this.$t("uc.login.success")),console.log(t.token),this.$store.commit("setToken",t.token),this.$router.push({name:"SafeLogin",params:{email:this.formInline.user}})):this.$Message.error(t.message)})).catch((t=>{this.$Message.error(t)})):this.$Message.error("請輸入正確帳號密碼")},handleSubmit(t){this.$refs[t].validate((t=>{if(t){var e={};e["username"]=this.formInline.user,e["password"]=this.formInline.password}}));var e=this._captchaResult;e?this.$refs[t].validate((t=>{if(t){var e={};e["username"]=this.formInline.user,e["password"]=this.formInline.password}})):(s()("#notice").show(),setTimeout((function(){s()("#notice").hide()}),2e3))}}},c=l,u=n(1001),f=(0,u.Z)(c,o,i,!1,null,"68cde6aa",null),p=f.exports},39563:function(t,e,n){n(57658),function(t){if("undefined"===typeof t)throw new Error("Geetest requires browser environment");var e=t.document,n=t.Math,o=e.getElementsByTagName("head")[0];function i(t){this._obj=t}function r(t){var e=this;new i(t)._each((function(t,n){e[t]=n}))}i.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},r.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return a(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var e=this;new i(t)._each((function(t,n){e[t]=n}))}};var s=function(t){return"number"===typeof t},a=function(t){return"string"===typeof t},l=function(t){return"boolean"===typeof t},c=function(t){return"object"===typeof t&&null!==t},u=function(t){return"function"===typeof t},f={},p={},h=function(){return parseInt(1e4*n.random())+(new Date).valueOf()},g=function(t,n){var i=e.createElement("script");i.charset="UTF-8",i.async=!0,i.onerror=function(){n(!0)};var r=!1;i.onload=i.onreadystatechange=function(){r||i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(r=!0,setTimeout((function(){n(!1)}),0))},i.src=t,o.appendChild(i)},d=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},m=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},_=function(t){if(!t)return"";var e="?";return new i(t)._each((function(t,n){(a(n)||s(n)||l(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")})),"?"===e&&(e=""),e.replace(/&$/,"")},v=function(t,e,n,o){e=d(e);var i=m(n)+_(o);return e&&(i=t+e+i),i},w=function(t,e,n,o,i){var r=function(s){var a=v(t,e[s],n,o);g(a,(function(t){t?s>=e.length-1?i(!0):r(s+1):i(!1)}))};r(0)},y=function(e,n,o,i){if(c(o.getLib))return o._extend(o.getLib),void i(o);if(o.offline)i(o._get_fallback_config());else{var r="geetest_"+h();t[r]=function(e){"success"==e.status?i(e.data):e.status?i(o._get_fallback_config()):i(e),t[r]=void 0;try{delete t[r]}catch(n){}},w(o.protocol,e,n,{gt:o.gt,callback:r},(function(t){t&&i(o._get_fallback_config())}))}},b=function(t,e){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!==typeof e.onError)throw new Error(n[t]);e.onError(n[t])},I=function(){return t.Geetest||e.getElementById("gt_lib")};I()&&(p.slide="loaded"),t.initGeetest=function(e,n){var o=new r(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==e.gt&&"3bd38408ae4af923ed36e13819b14d42"!==e.gt||(o.apiserver="yumchina.geetest.com/",o.api_server="yumchina.geetest.com"),c(e.getType)&&o._extend(e.getType),y([o.api_server||o.apiserver],o.typePath,o,(function(e){var i=e.type,r=function(){o._extend(e),n(new t.Geetest(o))};f[i]=f[i]||[];var s=p[i]||"init";"init"===s?(p[i]="loading",f[i].push(r),w(o.protocol,e.static_servers||e.domains,e[i]||e.path,null,(function(t){if(t)p[i]="fail",b("networkError",o);else{p[i]="loaded";for(var e=f[i],n=0,r=e.length;n<r;n+=1){var s=e[n];u(s)&&s()}f[i]=[]}}))):"loaded"===s?r():"fail"===s?b("networkError",o):"loading"===s&&f[i].push(r)}))}}(window)}}]);
//# sourceMappingURL=952.487e5fc7.js.map