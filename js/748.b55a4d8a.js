"use strict";(self["webpackChunkweb_front"]=self["webpackChunkweb_front"]||[]).push([[748],{28748:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login_form"},[e("div",{staticClass:"login_right"},[t.allowRegister?e("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[e("div",{staticClass:"login_title"},[t._v("安全驗證")]),e("p",{staticStyle:{"text-align":"left","padding-right":"10px","font-size":"14px"}},[t._v(" 電子郵件驗證碼 ")]),e("FormItem",{attrs:{prop:"code"}},[e("Input",{attrs:{type:"text",placeholder:t.$t("uc.regist.smscode")},model:{value:t.formInline.code,callback:function(e){t.$set(t.formInline,"code",e)},expression:"formInline.code"}}),e("input",{attrs:{id:"sendCode",type:"Button",shape:"circle",disabled:t.codedisabled},domProps:{value:t.sendcodeValue}})],1),e("p",{staticStyle:{color:"#979797",float:"left","padding-right":"10px","font-size":"12px"}},[t._v(" 輸入發送給"+t._s(t.userId)+"的6位數代碼 ")]),e("FormItem",[e("Button",{staticClass:"register_btn",attrs:{disabled:t.registing},on:{click:function(e){return t.checksafe()}}},[t._v("提交")])],1),e("router-link",{staticStyle:{color:"#979797",float:"left","padding-right":"10px","font-size":"12px"},attrs:{to:"/findPwd"}},[t._v(" 切換至其他驗證方式 ")]),e("br"),e("router-link",{staticStyle:{color:"#979797",float:"left","padding-right":"10px","font-size":"12px"},attrs:{to:"/findPwd"}},[t._v(" 安全驗證不可用? ")])],1):t._e()],1)])},s=[],n=(i(57658),i(39563),i(77387)),o=i.n(n),a=i(37828),c={name:"safeLogin",data(){const t=(t,e,i)=>{if(0==this.changeActive)i();else{var r=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;r=/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/,""==e?i(new Error(this.$t("uc.regist.emailtip"))):r.test(this.formInline.user)?i():i(new Error(this.$t("uc.regist.emailerr")))}},e=(t,e,i)=>{""===e?i(new Error(this.$t("uc.regist.confirmpwdtip"))):e!==this.formInline.password?i(new Error(this.$t("uc.regist.confirmpwderr"))):i()};return{country:"美国",codedisabled:!1,sendcodeValue:this.$t("uc.regist.sendcode"),isRegister:!1,ticket:"",randStr:"",registing:!1,captchaObj:null,modal1:!1,_captchaResult:null,agree:!0,allowRegister:!0,buttonLists:[{text:this.$t("uc.regist.telregist")},{text:this.$t("uc.regist.emailregist")}],areas:[],changeActive:0,showCode:!0,countdown:60,formInline:{username:"",user:"",code:"",areaCode:"",password:"",repassword:"",promotion:""},ruleInline:{user:[{validator:t,trigger:"blur"}],code:[{required:!0,message:this.$t("uc.regist.smscodetip"),trigger:"blur"}],password:[{required:!0,message:this.$t("uc.regist.pwdtip"),trigger:"blur"},{type:"string",min:6,message:this.$t("uc.regist.pwdmsg"),trigger:"blur"}],repassword:[{validator:e,trigger:"blur"}]},key:"",code:""}},watch:{},computed:{isLogin:function(){return this.$store.getters.isLogin},userId(){return this.$route.params.userId},token(){return this.$route.params.token},status(){return this.$route.params.status}},created:function(){window.scrollTo(0,0),this.init(),this.actives(this.changeActive),void 0!=this.$route.query.code&&""!=this.$route.query.code&&null!=this.$route.query.code?this.formInline.promotion=this.$route.query.code:this.formInline.promotion=""},methods:{checksafe(){let t={input:this.userId,verification_token:this.token,verification_code:this.formInline.code};"add"==this.status?(0,a._s)(t).then((t=>{"1"==t?(this.$Notice.success({title:this.$t("common.tip"),desc:"驗證成功!"}),this.$router.push("/login")):this.$Notice.error({title:this.$t("common.tip"),desc:t.message})})).catch((t=>{this.$Notice.error({title:this.$t("common.tip"),desc:t.message})})):"login"==this.status&&(0,a.yb)(t).then((t=>{"1"==t.code?(this.$Notice.success({title:this.$t("common.tip"),desc:"驗證成功!"}),this.$store.commit("setToken",t.data.token.access_token),this.$store.commit("setMember",{user:this.userId}),this.$router.push("/uc/safe")):this.$Notice.error({title:this.$t("common.tip"),desc:t.message})})).catch((t=>{this.$Notice.error({title:this.$t("common.tip"),desc:t.message})}))},updateLangData(){this.buttonLists=[{text:this.$t("uc.regist.telregist")},{text:this.$t("uc.regist.emailregist")}],0==this.changeActive?this.key=this.$t("uc.regist.telno"):this.key=this.$t("uc.regist.email")},init(){this.$store.commit("navigate","nav-other"),this.$store.state.HeaderActiveName="0",this.isLogin&&this.$router.push("/"),this.initGtCaptcha()},initGtCaptcha(){this.$http.get(this.host+this.api.uc.captcha).then((function(t){window.initGeetest({gt:t.body.gt,challenge:t.body.challenge,offline:!t.body.success,new_captcha:t.body.new_captcha,product:"bind",width:"100%",lang:"en"},this.handler)}))},handler(t){t.onReady((()=>{o()("#wait").hide()})).onSuccess((()=>{this.isRegister=!0,this.success()})),o()("#sendCode").click((()=>{this.formInline.user;const e=!0;e&&t.verify(),!e&&this.$Message.error("请填写正确的手机号或者邮箱号")}))},onAreaChange(t){for(var e=0;e<this.areas.length;e++)this.areas[e].zhName==t&&(this.formInline.areaCode=this.areas[e].areaCode)},getAreas(){this.$http.post(this.host+this.api.common.area).then((t=>{var e=t.body;this.areas=e.data,this.formInline.country=this.areas[0].zhName,this.formInline.areaCode=this.areas[0].areaCode}))},actives:function(t){this.changeActive=t,0==this.changeActive?(this.showCode=!0,this.key=this.$t("uc.regist.telno"),this.ruleInline.code=[{required:!0,message:this.$t("uc.regist.smscodetip"),trigger:"blur"}]):(this.showCode=!1,this.key=this.$t("uc.regist.email"),this.ruleInline.code=[])}}},l=c,u=i(1001),h=(0,u.Z)(l,r,s,!1,null,"68d1f766",null),d=h.exports},39563:function(t,e,i){i(57658),function(t){if("undefined"===typeof t)throw new Error("Geetest requires browser environment");var e=t.document,i=t.Math,r=e.getElementsByTagName("head")[0];function s(t){this._obj=t}function n(t){var e=this;new s(t)._each((function(t,i){e[t]=i}))}s.prototype={_each:function(t){var e=this._obj;for(var i in e)e.hasOwnProperty(i)&&t(i,e[i]);return this}},n.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return a(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var e=this;new s(t)._each((function(t,i){e[t]=i}))}};var o=function(t){return"number"===typeof t},a=function(t){return"string"===typeof t},c=function(t){return"boolean"===typeof t},l=function(t){return"object"===typeof t&&null!==t},u=function(t){return"function"===typeof t},h={},d={},f=function(){return parseInt(1e4*i.random())+(new Date).valueOf()},g=function(t,i){var s=e.createElement("script");s.charset="UTF-8",s.async=!0,s.onerror=function(){i(!0)};var n=!1;s.onload=s.onreadystatechange=function(){n||s.readyState&&"loaded"!==s.readyState&&"complete"!==s.readyState||(n=!0,setTimeout((function(){i(!1)}),0))},s.src=t,r.appendChild(s)},p=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},m=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},v=function(t){if(!t)return"";var e="?";return new s(t)._each((function(t,i){(a(i)||o(i)||c(i))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")})),"?"===e&&(e=""),e.replace(/&$/,"")},_=function(t,e,i,r){e=p(e);var s=m(i)+v(r);return e&&(s=t+e+s),s},w=function(t,e,i,r,s){var n=function(o){var a=_(t,e[o],i,r);g(a,(function(t){t?o>=e.length-1?s(!0):n(o+1):s(!1)}))};n(0)},y=function(e,i,r,s){if(l(r.getLib))return r._extend(r.getLib),void s(r);if(r.offline)s(r._get_fallback_config());else{var n="geetest_"+f();t[n]=function(e){"success"==e.status?s(e.data):e.status?s(r._get_fallback_config()):s(e),t[n]=void 0;try{delete t[n]}catch(i){}},w(r.protocol,e,i,{gt:r.gt,callback:n},(function(t){t&&s(r._get_fallback_config())}))}},$=function(t,e){var i={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!==typeof e.onError)throw new Error(i[t]);e.onError(i[t])},b=function(){return t.Geetest||e.getElementById("gt_lib")};b()&&(d.slide="loaded"),t.initGeetest=function(e,i){var r=new n(e);e.https?r.protocol="https://":e.protocol||(r.protocol=t.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==e.gt&&"3bd38408ae4af923ed36e13819b14d42"!==e.gt||(r.apiserver="yumchina.geetest.com/",r.api_server="yumchina.geetest.com"),l(e.getType)&&r._extend(e.getType),y([r.api_server||r.apiserver],r.typePath,r,(function(e){var s=e.type,n=function(){r._extend(e),i(new t.Geetest(r))};h[s]=h[s]||[];var o=d[s]||"init";"init"===o?(d[s]="loading",h[s].push(n),w(r.protocol,e.static_servers||e.domains,e[s]||e.path,null,(function(t){if(t)d[s]="fail",$("networkError",r);else{d[s]="loaded";for(var e=h[s],i=0,n=e.length;i<n;i+=1){var o=e[i];u(o)&&o()}h[s]=[]}}))):"loaded"===o?n():"fail"===o?$("networkError",r):"loading"===o&&h[s].push(n)}))}}(window)}}]);
//# sourceMappingURL=748.b55a4d8a.js.map